# Notion API 設定ガイド

このドキュメントでは、スタートアップスタジオ協会サイトとNotionを連携する手順を説明します。

## 1. Notion Integration の作成

1. [Notion Developers](https://www.notion.so/my-integrations) にアクセス
2. 「New integration」をクリック
3. 以下の情報を入力：
   - Name: `スタートアップスタジオ協会`
   - Associated workspace: 使用するワークスペースを選択
   - Type: `Internal`
4. 「Submit」をクリック
5. 表示される **Internal Integration Token** をコピー（後で使用）

## 2. Notionデータベースの作成

### 2.1 スタートアップDB

1. Notionで新しいデータベースを作成
2. 以下のプロパティを追加：

| プロパティ名 | タイプ | 説明 |
|------------|--------|------|
| 企業名 | タイトル | スタートアップの名前 |
| 出身スタジオ | セレクト | 出身スタジオ名 |
| 領域 | セレクト | HR Tech, Fin Tech, Ed Tech など |
| 設立年 | 数値 | 設立年（例: 2018） |
| 調達額 | 数値 | 累計調達額（億円単位） |
| ステージ | セレクト | Seed / Pre-Series A / Series A / Series B / Series C+ / IPO / M&A |
| 説明 | テキスト | 企業の説明文 |
| Exit | セレクト | なし / IPO / M&A |

3. データベースのURLから **Database ID** を取得
   - URL例: `https://www.notion.so/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?v=...`
   - `xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` の部分がDatabase ID

### 2.2 スタジオ一覧

1. Notionで新しいデータベースを作成
2. 以下のプロパティを追加：

| プロパティ名 | タイプ | 説明 |
|------------|--------|------|
| スタジオ名 | タイトル | スタジオの名前 |
| タイプ | セレクト | 独立系 / 大企業系 / VC系 / 大学系 |
| 創出企業数 | 数値 | 創出したスタートアップの数 |
| Exit数 | 数値 | Exit実績の数 |
| 累計調達額 | 数値 | 累計調達額（億円単位） |
| 説明 | テキスト | スタジオの説明文 |

3. データベースのURLから **Database ID** を取得

### 2.3 レポート

1. Notionで新しいデータベースを作成
2. 以下のプロパティを追加：

| プロパティ名 | タイプ | 説明 |
|------------|--------|------|
| タイトル | タイトル | レポートのタイトル |
| 発行日 | 日付 | レポートの発行日 |
| 説明 | テキスト | レポートの説明文 |
| PDFファイル | ファイル | PDFファイル（アップロード） |

3. データベースのURLから **Database ID** を取得

## 3. データベースへのアクセス権限付与

各データベースに対して、作成したIntegrationへのアクセス権限を付与します：

1. データベースページを開く
2. 右上の「…」メニューをクリック
3. 「Add connections」を選択
4. 作成したIntegration（スタートアップスタジオ協会）を選択

**重要**: 3つすべてのデータベースに対してこの操作を行ってください。

## 4. 環境変数の設定

Manusの管理画面で以下の環境変数を設定します：

1. 管理画面右側の「Settings」→「Secrets」を開く
2. 以下の環境変数を追加：

| 環境変数名 | 値 |
|-----------|-----|
| `NOTION_API_KEY` | 手順1で取得したIntegration Token |
| `NOTION_STARTUPS_DB_ID` | スタートアップDBのDatabase ID |
| `NOTION_STUDIOS_DB_ID` | スタジオ一覧のDatabase ID |
| `NOTION_REPORTS_DB_ID` | レポートのDatabase ID |

## 5. サンプルデータの入力

### スタートアップDBのサンプル

| 企業名 | 出身スタジオ | 領域 | 設立年 | 調達額 | ステージ | 説明 | Exit |
|--------|-------------|------|--------|--------|---------|------|------|
| タイミー | AND ON | HR Tech | 2018 | 183 | IPO | スキマバイトアプリ。働きたい時間と働いて欲しい時間をマッチング。 | IPO |
| RURA | Gaiax | Prop Tech | 2020 | 15 | Series A | 空き家・空き地の管理・活用プラットフォーム。 | なし |

### スタジオ一覧のサンプル

| スタジオ名 | タイプ | 創出企業数 | Exit数 | 累計調達額 | 説明 |
|-----------|--------|-----------|--------|-----------|------|
| Gaiax | 独立系 | 12 | 2 | 50 | ソーシャルメディア・シェアリングエコノミー領域を中心に多数のスタートアップを創出。 |
| AND ON | 独立系 | 8 | 1 | 200 | HR Tech、Ed Tech領域を中心にスタートアップを創出。 |

### レポートのサンプル

| タイトル | 発行日 | 説明 | PDFファイル |
|---------|--------|------|------------|
| スタートアップスタジオの現状 2024 | 2024-12-01 | 日本と海外のスタートアップスタジオ業界を徹底分析。スタジオ数、実績、トレンドを網羅。 | （PDFをアップロード） |

## 6. 動作確認

1. 環境変数を設定後、サーバーを再起動
2. サイトにアクセスして、Notionのデータが表示されることを確認
3. Notionでデータを更新し、サイトに反映されることを確認（ページをリロード）

## トラブルシューティング

### データが表示されない場合

1. **環境変数が正しく設定されているか確認**
   - 管理画面の「Settings」→「Secrets」で確認

2. **Integration Tokenが正しいか確認**
   - Notion Developersページで再確認

3. **Database IDが正しいか確認**
   - NotionのデータベースURLから再度取得

4. **アクセス権限が付与されているか確認**
   - 各データベースの「Connections」に作成したIntegrationが表示されているか確認

5. **サーバーログを確認**
   - エラーメッセージがある場合は、その内容を確認

### モックデータが表示される場合

環境変数が設定されていない場合、システムは自動的にモックデータを表示します。これは正常な動作です。Notion連携を有効にするには、上記の手順に従って環境変数を設定してください。

## 参考リンク

- [Notion API Documentation](https://developers.notion.com/)
- [Notion API Client for JavaScript](https://github.com/makenotion/notion-sdk-js)
